
---

### C. Minimal Starter Code

Create `src/nxtabroad_data_validation/validators.py`:

```python
from dataclasses import dataclass
from typing import List, Literal, Optional
import pandas as pd


IssueLevel = Literal["ERROR", "WARNING"]


@dataclass
class ValidationIssue:
    level: IssueLevel
    message: str
    row_index: Optional[int] = None
    column: Optional[str] = None


@dataclass
class ValidationResult:
    is_valid: bool
    issues: List[ValidationIssue]


REQUIRED_COLUMNS = [
    "full_name",
    "passport_number",
    "country_of_residence",
    "target_country",
    "available_funds_gbp",
    "intended_intake",
]


def validate_applicant_sheet(path: str) -> ValidationResult:
    """Basic CSV validation â€“ extend with more rules as needed."""
    df = pd.read_csv(path)
    issues: List[ValidationIssue] = []

    # Check required columns
    for col in REQUIRED_COLUMNS:
        if col not in df.columns:
            issues.append(
                ValidationIssue(
                    level="ERROR",
                    message=f"Missing required column: '{col}'",
                )
            )

    # If required cols missing, no need to go deeper
    if any(i.level == "ERROR" and "Missing required column" in i.message for i in issues):
        return ValidationResult(is_valid=False, issues=issues)

    # Check for missing key values
    for col in REQUIRED_COLUMNS:
        missing_rows = df[df[col].isna()]
        for idx in missing_rows.index:
            issues.append(
                ValidationIssue(
                    level="ERROR",
                    message=f"Missing value in required column '{col}'",
                    row_index=int(idx),
                    column=col,
                )
            )

    # Simple numeric threshold (dummy threshold, not immigration advice)
    for idx, row in df.iterrows():
        try:
            funds = float(row["available_funds_gbp"])
        except (TypeError, ValueError):
            issues.append(
                ValidationIssue(
                    level="ERROR",
                    message="Invalid numeric value in 'available_funds_gbp'",
                    row_index=int(idx),
                    column="available_funds_gbp",
                )
            )
            continue

        if funds < 5000:  # placeholder threshold
            issues.append(
                ValidationIssue(
                    level="WARNING",
                    message="Available funds below indicative threshold (5000 GBP).",
                    row_index=int(idx),
                    column="available_funds_gbp",
                )
            )

    is_valid = not any(i.level == "ERROR" for i in issues)
    return ValidationResult(is_valid=is_valid, issues=issues)
